import{u as B}from"./action.74adb01a.js";import{d as D,m as y,o as i,c as a,u as p,F as h,n as c,q as N,b as s,t as m,l as C}from"./vendor.3f586db1.js";const b={key:0},k=s("li",{class:"li-head"},[s("aside",null,"\u79D2"),s("h5",null,"\u90AA\u9F99"),s("h5",null,"\u5723\u9F99")],-1),A={class:"xie"},S=["src"],L={class:"sheng"},T=["src"],V=D({setup(E){addOverlayListener("LogLine",v),startOverlayEvents();const H=B(),P="https://cafemaker.wakingsands.com/i",x={xie:["\u5C3C\u5FB7\u970D\u683C","\u30CB\u30FC\u30BA\u30D8\u30C3\u30B0","Nidhogg"],sheng:["\u8D6B\u62C9\u65AF\u74E6\u5C14\u683C","\u30D5\u30EC\u30FC\u30B9\u30F4\u30A7\u30EB\u30B0","Hraesvelgr"]},n=y({data:[]}),l={xie:0,sheng:0};let u=0;function F(e="000000/000405"){return P+"/"+e+".png"}function v(e){var r;if(u===0&&e.line[0]==="20"&&/^6D41$/.test(e.line[4]))n.data.length=0,n.data[0]={xie:[],sheng:[],xieHP:"0",shengHP:"0"},u=new Date().getTime(),setTimeout(()=>{u=0},7700);else if(e.line[0]==="20"&&/^(?:63C8|6D21)$/.test(e.line[4]))n.data.length=0,n.data[0]={xie:[],sheng:[],xieHP:"0",shengHP:"0"};else if(u>0&&(e.line[0]==="21"||e.line[0]==="22")&&e.line[2][0]==="1"&&e.line[6][0]==="4"){if(e.line[4]==="07"||e.line[4]==="08")return;const t=Math.round((new Date().getTime()-u)/1e3);n.data[t]===void 0&&(n.data[t]={xie:[],sheng:[],xieHP:l.xie.toFixed(1),shengHP:l.sheng.toFixed(1)}),console.log(1,n.data[t].xieHP.toString(),n.data[t].shengHP.toString());const o=F((r=H.getActionById(parseInt(e.line[4],16)))==null?void 0:r.Url);x.xie.includes(e.line[7])?(l.xie=Number(e.line[24])/Number(e.line[25])*100,n.data[t].xie.push(o),n.data[t].xieHP=l.xie.toFixed(1),console.log(2.1,n.data[t].xieHP.toString())):x.sheng.includes(e.line[7])&&(l.sheng=Number(e.line[24])/Number(e.line[25])*100,n.data[t].sheng.push(o),n.data[t].shengHP=l.sheng.toFixed(1),console.log(2.2,n.data[t].shengHP.toString()))}}return(e,r)=>(i(),a("main",null,[p(n).data.length>0?(i(),a("ul",b,[k,(i(!0),a(h,null,c(p(n).data,(t,o)=>{var _,f;return i(),a("li",{class:"li-main",key:o},[s("aside",null,m(o),1),s("div",A,[C(m((_=t==null?void 0:t.xieHP)!=null?_:"")+"%",1),(i(!0),a(h,null,c(t.xie,(g,d)=>(i(),a("img",{key:d,src:g,alt:""},null,8,S))),128))]),s("div",L,[C(m((f=t==null?void 0:t.shengHP)!=null?f:"")+"%",1),(i(!0),a(h,null,c(t.sheng,(g,d)=>(i(),a("img",{key:d,src:g,alt:""},null,8,T))),128))])])}),128))])):N("",!0)]))}});export{V as default};
