import{u as H}from"./action.a15b7e0f.js";import{k as P,l as y,o as i,f as s,u as p,F as d,q as c,s as k,g as a,t as m,j as C}from"./vendor.813eed01.js";const N={key:0},A=a("li",{class:"li-head"},[a("aside",null,"\u79D2"),a("h5",null,"\u90AA\u9F99"),a("h5",null,"\u5723\u9F99")],-1),w={class:"xie"},b=["src"],L={class:"sheng"},T=["src"],j=P({setup(E){addOverlayListener("LogLine",D),startOverlayEvents();const F=H(),v="https://cafemaker.wakingsands.com/i",x={xie:["\u5C3C\u5FB7\u970D\u683C","\u30CB\u30FC\u30BA\u30D8\u30C3\u30B0","Nidhogg"],sheng:["\u8D6B\u62C9\u65AF\u74E6\u5C14\u683C","\u30D5\u30EC\u30FC\u30B9\u30F4\u30A7\u30EB\u30B0","Hraesvelgr"]},n=y({data:[],show:!1}),l={xie:0,sheng:0};let u=0;function B(e="000000/000405"){return v+"/"+e+".png"}function D(e){var o;if(u===0&&e.line[0]==="20"&&/^6D41$/.test(e.line[4]))n.data.length=0,n.show=!0,n.data[0]={xie:[],sheng:[],xieHP:"0",shengHP:"0"},u=new Date().getTime(),setTimeout(()=>{u=0},7700);else if(e.line[0]==="20"&&/^(?:63C8|6D21)$/.test(e.line[4]))n.data.length=0,n.show=!1,n.data[0]={xie:[],sheng:[],xieHP:"0",shengHP:"0"};else if(u>0&&(e.line[0]==="21"||e.line[0]==="22")&&e.line[2][0]==="1"&&e.line[6][0]==="4"){if(e.line[4]==="07"||e.line[4]==="08")return;const t=Math.round((new Date().getTime()-u)/1e3);n.data[t]===void 0&&(n.data[t]={xie:[],sheng:[],xieHP:l.xie.toFixed(1),shengHP:l.sheng.toFixed(1)});const r=B((o=F.getActionById(parseInt(e.line[4],16)))==null?void 0:o.Url);x.xie.includes(e.line[7])?(l.xie=Number(e.line[24])/Number(e.line[25])*100,n.data[t].xie.push(r),n.data[t].xieHP=l.xie.toFixed(1)):x.sheng.includes(e.line[7])&&(l.sheng=Number(e.line[24])/Number(e.line[25])*100,n.data[t].sheng.push(r),n.data[t].shengHP=l.sheng.toFixed(1))}}return(e,o)=>(i(),s("main",null,[p(n).show?(i(),s("ul",N,[A,(i(!0),s(d,null,c(p(n).data,(t,r)=>{var _,f;return i(),s("li",{class:"li-main",key:r},[a("aside",null,m(r),1),a("div",w,[C(m((_=t==null?void 0:t.xieHP)!=null?_:"")+"%",1),(i(!0),s(d,null,c(t.xie,(h,g)=>(i(),s("img",{key:g,src:h,alt:""},null,8,b))),128))]),a("div",L,[C(m((f=t==null?void 0:t.shengHP)!=null?f:"")+"%",1),(i(!0),s(d,null,c(t.sheng,(h,g)=>(i(),s("img",{key:g,src:h,alt:""},null,8,T))),128))])])}),128))])):k("",!0)]))}});export{j as default};
