"use strict";(function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)})(function(t){function e(t){var e=t.clone();return e.css({position:"absolute",width:t.width(),height:t.height(),"z-index":1e5}),e}function n(t,e,n){for(var i,o,r,a,s,f,c,u=t.offset(),d=t.width(),l=t.height(),h=u.left,g=u.left+d,p=u.top,v=u.top+l,m=0;m<n.length;m++)if(i=n.eq(m),i[0]!==e[0]&&(a=i.offset(),o=a.left+.5*i.width(),r=a.top+.5*i.height(),s=o<g&&o>h,f=r<v&&r>p,c=s&&f,c))return i[0]}function i(e,i,r){var a=n(e,i,r);if(a!==i[0]){var s=r.index(a),f=r.index(i);s<f?t(a).before(i):t(a).after(i),o(r,f,s)}}function o(t,e,n){var i=t.splice(e,1)[0];return t.splice(n,0,i)}function r(){return".drag-arrange-"+ ++f}var a="ontouchstart"in document.documentElement,s=5,f=0,c=a?{START:"touchstart",MOVE:"touchmove",END:"touchend"}:{START:"mousedown",MOVE:"mousemove",END:"mouseup"};t.fn.arrangeable=function(n){function o(n){if(E){var o=t(d),r=(n.clientX||n.originalEvent.touches[0].clientX)-l,a=(n.clientY||n.originalEvent.touches[0].clientY)-h;m?(n.stopPropagation(),u.css({left:p+r,top:v+a}),i(u,o,g)):(Math.abs(r)>s||Math.abs(a)>s)&&(u=e(o),p=d.offsetLeft-parseInt(o.css("margin-left"))-parseInt(o.css("padding-left")),v=d.offsetTop-parseInt(o.css("margin-top"))-parseInt(o.css("padding-top")),u.css({left:p,top:v}),o.parent().append(u),o.css("visibility","hidden"),m=!0)}}function a(t){m&&(t.stopPropagation(),m=!1,u.remove(),d.style.visibility="visible"),E=!1}function f(){g.each(function(){var e=n.dragSelector,i=t(this);e?i.off(c.START+T,e):i.off(c.START+T)}),t(document).off(c.MOVE+T).off(c.END+T),g.eq(0).data("drag-arrange-destroy",null),g=null,o=null,a=null}var u,d,l,h,g,p,v,m=!1,E=!1;if("string"==typeof n&&"destroy"===n)return this.eq(0).data("drag-arrange-destroy")&&this.eq(0).data("drag-arrange-destroy")(),this;n=t.extend({},n),g=this;var T=r();this.each(function(){function e(t){t.stopPropagation(),E=!0,l=t.clientX||t.originalEvent.touches[0].clientX,h=t.clientY||t.originalEvent.touches[0].clientY,d=o}var i=n.dragSelector,o=this,r=t(this);i?r.on(c.START+T,i,e):r.on(c.START+T,e)}),t(document).on(c.MOVE+T,o).on(c.END+T,a),this.eq(0).data("drag-arrange-destroy",f)}});